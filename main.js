(()=>{"use strict";function e(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",n)}function t(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",n)}function n(e){"Escape"===e.key&&t(document.querySelector(".popup_is-opened"))}function o(e,t,n,o){var r=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0),c=r.querySelector(".card__image"),i=r.querySelector(".card__likes");return c.src=e.link,c.alt=e.name,r.querySelector(".card__title").textContent=e.name,i.textContent="0",r.querySelector(".card__delete-button").addEventListener("click",t),r.querySelector(".card__like-button").addEventListener("click",n),c.addEventListener("click",(function(){o(e)})),r}function r(e){e.target.closest(".card").remove()}function c(e){e.target.classList.toggle("card__like-button_is-active");var t=e.target.closest(".card__likes_container").querySelector(".card__likes");"0"===t.textContent?t.textContent="1":t.textContent="0"}function i(e,t,n,o){var r=e.querySelector(".".concat(t.name,"-error"));t.classList.remove(n),r.classList.remove(o),r.textContent=""}function a(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);n.forEach((function(n){i(e,n,t.inputErrorClass,t.errorClass)})),u(n,o,t.inactiveButtonClass)}function u(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(n),t.disabled=!1):(t.classList.add(n),t.disabled=!0)}fetch("https://nomoreparties.co/v1/wff-cohort-41/users/me",{method:"PATCH",headers:{authorization:"52ce74cc-c12d-49ab-9ce7-42a4e4867e05","Content-Type":"application/json"},body:JSON.stringify({name:"Marie Sk≈Çodowska Curie",about:"Physicist and Chemist"})}).then((function(e){return e.json()})).then((function(e){}));var s=document.querySelector(".popup_type_image"),l=document.querySelector(".popup_type_edit"),d=document.querySelector(".popup_type_new-card"),p=document.querySelector(".profile__edit-button"),m=document.querySelector(".profile__add-button"),f=document.querySelectorAll(".popup"),_=s.querySelector(".popup__image"),v=s.querySelector(".popup__caption"),y={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function S(t){e(s),_.src=t.link,_.alt=t.name,v.textContent=t.name}f.forEach((function(e){e.classList.add("popup_is-animated"),e.querySelector(".popup__close").addEventListener("click",(function(){t(e)})),e.addEventListener("click",(function(n){n.target===n.currentTarget&&t(e)}))}));var h=document.forms.edit_profile,C=h.elements.name,q=h.elements.description,E=document.querySelector(".profile__title"),b=document.querySelector(".profile__description"),L=document.querySelector(".profile__image"),k=document.querySelector(".places__list");Promise.all([fetch("https://nomoreparties.co/v1/wff-cohort-41/users/me",{method:"GET",headers:{authorization:"52ce74cc-c12d-49ab-9ce7-42a4e4867e05"}}).then((function(e){return e.json()})).then((function(e){return e})),fetch("https://nomoreparties.co/v1/wff-cohort-41/cards",{method:"GET",headers:{authorization:"52ce74cc-c12d-49ab-9ce7-42a4e4867e05"}}).then((function(e){return e.json()})).then((function(e){return e}))]).then((function(e){var t=e[0],n=e[1];E.textContent=t.name,b.textContent=t.about,L.src=t.avatar,t._id,n.forEach((function(e){var t=o(e,r,c,S);k.append(t)}))})),p.addEventListener("click",(function(){C.value=E.textContent,q.value=b.textContent,a(h,y),e(l)})),m.addEventListener("click",(function(){e(d)})),h.addEventListener("submit",(function(e){e.preventDefault(),E.textContent=C.value,b.textContent=q.value,t(l)}));var g=document.forms.new_place,x=g.elements.place_name,w=g.elements.link;g.addEventListener("submit",(function(e){e.preventDefault();var n=o({name:x.value,link:w.value},r,c,S);k.prepend(n),g.reset(),a(g,y),t(d)})),function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()}));var n=Array.from(t.querySelectorAll(e.inputSelector)),o=t.querySelector(e.submitButtonSelector);u(n,o,e.inactiveButtonClass),n.forEach((function(r){r.addEventListener("input",(function(){!function(e,t,n,o){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?i(e,t,n,o):function(e,t,n,o,r){var c=e.querySelector(".".concat(t.name,"-error"));t.classList.add(o),c.textContent=n,c.classList.add(r)}(e,t,t.validationMessage,n,o)}(t,r,e.inputErrorClass,e.errorClass),u(n,o,e.inactiveButtonClass)}))}))}))}(y)})();